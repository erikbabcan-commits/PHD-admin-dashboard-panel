
<!-- Header -->
<header class="bg-brand-dark/80 backdrop-blur-sm sticky top-0 z-30 shadow-lg border-b border-gold/10">
    <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
        <a routerLink="/" class="text-2xl font-bold text-gold tracking-widest">
            PAPI
        </a>
        <div class="hidden md:flex gap-6 text-lg">
            <a routerLink="/booking" routerLinkActive="text-gold font-semibold" class="text-white hover:text-gold transition-colors duration-300">Rezervovať</a>
            <a routerLink="/stylists" routerLinkActive="text-gold font-semibold" class="text-white hover:text-gold transition-colors duration-300">Stylisti</a>
            <a routerLink="/products" routerLinkActive="text-gold font-semibold" class="text-white hover:text-gold transition-colors duration-300">Produkty</a>
            <a routerLink="/gallery" routerLinkActive="text-gold font-semibold" class="text-white hover:text-gold transition-colors duration-300">Galéria</a>
            <a routerLink="/my-appointments" routerLinkActive="text-gold font-semibold" class="text-white hover:text-gold transition-colors duration-300">Moje Termíny</a>
        </div>
    </nav>
</header>

<div class="container mx-auto p-4 md:p-8 animate-fade-in-up">
    <h1 class="text-3xl md:text-4xl font-bold text-gold mb-8">Moje Termíny</h1>

    <!-- Upcoming Appointments -->
    <section>
        <h2 class="text-2xl font-semibold text-white mb-4 border-b-2 border-gold/20 pb-2">Nadchádzajúce</h2>
        @if (upcomingAppointments().length > 0) {
            <div class="space-y-6">
                @for(appt of upcomingAppointments(); track appt.id) {
                    @let details = getAppointmentDetails(appt);
                    <div class="bg-brand-dark/50 rounded-lg shadow-lg p-6 flex flex-col md:flex-row items-start gap-6 border border-gold/10">
                        <img [src]="details.stylistImageUrl" [alt]="details.stylistName" class="w-24 h-24 rounded-full object-cover border-2 border-gold/50">
                        <div class="flex-grow">
                            <h3 class="text-2xl font-bold text-white">{{ details.serviceName }}</h3>
                            <p class="text-lg text-brand-light/80">so stylistom <span class="font-semibold text-gold">{{ details.stylistName }}</span></p>
                            <p class="text-brand-light/70 mt-2 flex items-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                {{ appt.startTime | date:'EEEE, d. MMMM yyyy' }}
                            </p>
                             <p class="text-brand-light/70 flex items-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                {{ appt.startTime | date:'HH:mm' }}
                            </p>
                        </div>
                        <button (click)="cancelAppointment(appt.id)" class="bg-red-600/80 text-white font-bold py-2 px-4 rounded-full hover:bg-red-500 transition-colors duration-300 mt-4 md:mt-0 self-start md:self-center">
                            Zrušiť Termín
                        </button>
                    </div>
                }
            </div>
        } @else {
            <div class="text-center py-10 px-6 bg-brand-dark/30 rounded-lg">
                <p class="text-brand-light/70">Nemáte žiadne nadchádzajúce termíny.</p>
                <a routerLink="/booking" class="mt-4 inline-block bg-gold text-brand-dark font-bold py-2 px-6 rounded-full hover:bg-yellow-300 transition-colors">
                    Rezervovať Nový Termín
                </a>
            </div>
        }
    </section>

    <!-- Past Appointments -->
     <section class="mt-12">
        <h2 class="text-2xl font-semibold text-white mb-4 border-b-2 border-gold/20 pb-2">História</h2>
        @if (pastAppointments().length > 0) {
            <div class="space-y-4">
                 @for(appt of pastAppointments(); track appt.id) {
                    @let details = getAppointmentDetails(appt);
                    @let status = getStatusInfo(appt.status);
                    <div class="bg-brand-dark/40 rounded-lg p-4 flex items-center gap-4 border border-transparent">
                         <div class="flex-grow">
                             <p class="font-bold text-white">{{ details.serviceName }} s <span class="text-gold">{{ details.stylistName }}</span></p>
                             <p class="text-sm text-brand-light/70">{{ appt.startTime | date:'d. MMMM yyyy, HH:mm' }}</p>
                         </div>
                         <span class="font-semibold text-sm px-3 py-1 rounded-full" [class]="status.color + ' ' + status.color.replace('text', 'bg') + '/20'">
                            {{ status.text }}
                         </span>
                    </div>
                }
            </div>
        } @else {
            <div class="text-center py-10 px-6 bg-brand-dark/30 rounded-lg">
                <p class="text-brand-light/70">Zatiaľ nemáte žiadnu históriu termínov.</p>
            </div>
        }
    </section>

</div>
