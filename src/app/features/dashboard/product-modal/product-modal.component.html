<div class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center animate-fade-in p-4" (click)="onClose()">
  <div class="bg-brand-dark border border-gold/20 rounded-lg shadow-xl w-full max-w-lg relative animate-zoom-in text-left flex flex-col" (click)="$event.stopPropagation()">
    <header class="p-6 border-b border-gold/20 flex justify-between items-center">
      <h3 class="text-2xl font-bold text-gold">{{ isEditMode ? 'Upraviť Produkt' : 'Pridať Nový Produkt' }}</h3>
      <button (click)="onClose()" class="text-gray-400 hover:text-white transition-colors" aria-label="Zavrieť">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
      </button>
    </header>

    <form [formGroup]="productForm" (ngSubmit)="onSave()" class="p-6 space-y-4">
      <div>
        <label for="name" class="block text-sm font-medium text-brand-light/80 mb-2">Názov Produktu</label>
        <input type="text" id="name" formControlName="name" class="w-full bg-brand-dark/80 border border-gray-600 rounded-md p-3 text-white focus:ring-gold focus:border-gold">
         @if(productForm.get('name')?.invalid && productForm.get('name')?.touched) {
          <p class="text-red-400 text-sm mt-1">Názov je povinný.</p>
        }
      </div>
      <div>
        <label for="description" class="block text-sm font-medium text-brand-light/80 mb-2">Popis</label>
        <textarea id="description" formControlName="description" rows="3" class="w-full bg-brand-dark/80 border border-gray-600 rounded-md p-3 text-white focus:ring-gold focus:border-gold"></textarea>
         @if(productForm.get('description')?.invalid && productForm.get('description')?.touched) {
          <p class="text-red-400 text-sm mt-1">Popis je povinný.</p>
        }
      </div>
      <div>
        <label for="price" class="block text-sm font-medium text-brand-light/80 mb-2">Cena (€)</label>
        <input type="number" id="price" formControlName="price" class="w-full bg-brand-dark/80 border border-gray-600 rounded-md p-3 text-white focus:ring-gold focus:border-gold">
         @if(productForm.get('price')?.invalid && productForm.get('price')?.touched) {
          <p class="text-red-400 text-sm mt-1">Cena musí byť platné číslo väčšie ako 0.</p>
        }
      </div>
      <div>
        <label for="imageUrl" class="block text-sm font-medium text-brand-light/80 mb-2">URL Obrázku</label>
        <input type="text" id="imageUrl" formControlName="imageUrl" class="w-full bg-brand-dark/80 border border-gray-600 rounded-md p-3 text-white focus:ring-gold focus:border-gold">
         @if(productForm.get('imageUrl')?.invalid && productForm.get('imageUrl')?.touched) {
          <p class="text-red-400 text-sm mt-1">URL obrázku je povinná.</p>
        }
      </div>
      
      <footer class="pt-6 flex justify-end gap-4 border-t border-gold/20">
        <button type="button" (click)="onClose()" class="bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-500 transition-colors duration-300">
          Zrušiť
        </button>
        <button type="submit" [disabled]="productForm.invalid" class="bg-gold text-brand-dark font-bold py-2 px-6 rounded-full hover:bg-yellow-300 transition-colors duration-300 disabled:bg-gray-500 disabled:cursor-not-allowed">
          Uložiť
        </button>
      </footer>
    </form>
  </div>
</div>
